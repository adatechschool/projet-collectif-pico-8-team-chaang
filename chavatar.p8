pico-8 cartridge // http://www.pico-8.com
version 38
__lua__
--chavatar

function _init()
	create_player()
end

function _update()
	player_movement()
	update_camera()

end

function _draw()
	cls()
	draw_map()
	draw_player()
end


-->8
function draw_map()
	map(0,0,0,0,128,64)
end

function check_flag(flag,x,y)
	local sprite=mget(x,y)
	return fget(sprite,flag)
end

function update_camera()
	local camx=mid(0,p.x-7.5,127-15)
	local camy=mid(0,p.y-7.5,63-15)
	camera(camx*8,camy*8)
end
-->8
--player

function create_player()
	p={
		x=6;
		y=4;
		sprite=16
	}
end

function player_movement()
	newx=p.x
	newy=p.y
	
	if (btnp(⬅️)) newx-=1
	if (btnp(➡️)) newx+=1
	if (btnp(⬆️)) newy-=1
	if (btnp(⬇️)) newy+=1
	
	if not check_flag(0,newx,newy) then
		p.x=mid(0,newx,127)
		p.y=mid(0,newy,63)
	else
	sfx(0)
		end
end

function draw_player()
	spr(p.sprite,p.x*8,p.y*8)
end
	
__gfx__
000000003355653b333333333333333333333333333bb333b35665333355353333b33333333333b3333333330000000044cccccc4444444443344333cccccc43
00000000336555b3333339333333333333b3333333baab33b3365333336635333b33333333333b33333333b30000000034cccccc1111111114441444cccccc44
00700700336566b333339a933333566563b5333533bbab3353565365335655655b33665555566b3333333b33000000004ccccccccccccccc11111111ccccccc4
00077000333556333383393333635566555366653bbbb3135655555633635366355665535356353333333b330000000044ccccccccccccccccccccccccccccc4
000770003336563338a8333333556555536665663b3b331336663653336555536656556366556333bb333b330000000034cccccccccccccccccccccccccccc43
00700700336553333383333333563665663355b63111111356555635b33536655665b565535555333bb333330000000034cccccccccccccccccccccccccccc43
000000003b55653333333333b3656333333333b333342333333655b33b333333335566333335663333b33333000000004ccccccccccccccccccccccccccccc44
000000003b56653333333333b35565333333333333144233335565333b333333335356333365353333333333000000004cccccccccccccccccccccccccccccc4
0090900033333333000000000000000000000000000000000000000000000000000000000000000000000000cccccccc4ccccccc0000000000000000ccccccc4
0099990033333333000000000000000000000000000000000000000000000000000000000000000000000000cccccccc4ccccccc0000000000000000ccccccc4
0997979033333333000000000000000000000000000000000000000000000000000000000000000000000000cccccccc4ccccccc0000000000000000ccccccc4
0999f99033333333000000000000000000000000000000000000000000000000000000000000000000000000cccccccc4ccccccc0000000000000000ccccccc4
0099990033333333000000000000000000000000000000000000000000000000000000000000000000000000cccccccc4ccccccc0000000000000000ccccccc4
0955559033333333000000000000000000000000000000000000000000000000000000000000000000000000cccccccc4ccccccc0000000000000000ccccccc4
0999999033333333000000000000000000000000000000000000000000000000000000000000000000000000cccccccc4ccccccc0000000000000000ccccccc4
0090090033333333000000000000000000000000000000000000000000000000000000000000000000000000cccccccc4ccccccc0000000000000000ccccccc4
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000334444444cccccccccccccc444444433
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000341111114cccccccccccccc411111143
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000041cccccc4cccccccccccccc4cccccc14
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004ccccccc4cccccccccccccc4ccccccc4
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004ccccccc4cccccccccccccc4ccccccc4
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004ccccccc4cccccccccccccc4ccccccc4
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004ccccccc34cccccccccccc43ccccccc4
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004ccccccc3344444444444433ccccccc4
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000cccccccc0000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000cccccccc0000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000cccccccc0000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000cccccccc0000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000cccccccc0000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000cccccccc0000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000cccccccc0000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004ccccccc0000000000000000
__gff__
0000000000010000000000000101010100000000000000000000000101000001000000000000000000000000010101010000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
020211020205050505050502020a0a0500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
02020a0a020502020a0a02021111110500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1102020211050304040404040404040400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050505050102050505050505050500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
050304040404060205020a0a02020a0a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
05010a0505050102050505050505050200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
05010a0505050704040404040409050200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
05010a0505050505050505050501050500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
05012c0d0d0e2f02020a02020201020500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
05010c1b1b1b1b0d0d0e0d2f0a01020500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
05011c1b1b1b1b1b1b1b1b0f0201020500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
05012d1b1b1b1b1b1b1b1b1f0a07040400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0507091c1b1b1b1b1b1b1b0f0205050500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0502010c1b1b1b1b1b1b1b0f0205020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000100000b02000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
